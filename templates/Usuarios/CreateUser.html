{% extends "home/base.html" %}
{% load static %}

{% block content %}
<div class="grid-container large">
    <div class="grid-x grid-padding-x align-center">
        <div class="cell small-12 medium-10 large-8">
            <h3 class="text-center">Crear Usuario</h3>
            
            <!-- Mostrar los errores de validación generales (non-field errors) -->
            {% if form.non_field_errors %}
                <div class="callout alert">
                    <strong>Errores de validación:</strong>
                    <ul class="errorlist">
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
            
            <form method="POST" class="callout text-center">
                {% csrf_token %}
                <div class="grid-x grid-padding-x">
                    <div class="cell medium-6">
                        <label>Nombre
                            {{ form.Nombre }}
                        </label>
                        {% if form.Nombre.errors %}
                            <p class="form-error is-visible">{{ form.Nombre.errors }}</p>
                        {% endif %}
                    </div>
                    <div class="cell medium-6">
                        <label>Correo
                            {{ form.Correo }}
                        </label>
                        {% if form.Correo.errors %}
                            <p class="form-error is-visible">{{ form.Correo.errors }}</p>
                        {% endif %}
                    </div>
                </div>
                <div class="grid-x grid-padding-x">
                    <div class="cell medium-6">
                        <label>Contraseña
                            {{ form.password1 }}
                        </label>
                        {% if form.password1.errors %}
                            <p class="form-error is-visible">{{ form.password1.errors }}</p>
                        {% endif %}
                    </div>
                    <div class="cell medium-6">
                        <label>Confirmar Contraseña
                            {{ form.password2 }}
                        </label>
                        {% if form.password2.errors %}
                            <p class="form-error is-visible">{{ form.password2.errors }}</p>
                        {% endif %}
                    </div>
                    <div class="cell medium-6">
                        <label>Identificación
                            {{ form.identificacion }}
                        </label>
                        {% if form.identificacion.errors %}
                            <p class="form-error is-visible">{{ form.identificacion.errors }}</p>
                        {% endif %}
                    </div>
                </div>
                <div class="grid-x grid-padding-x">
                    <div class="cell medium-6">
                        <label>Teléfono
                            {{ form.telefono }}
                        </label>
                        {% if form.telefono.errors %}
                            <p class="form-error is-visible">{{ form.telefono.errors }}</p>
                        {% endif %}
                    </div>
                    <div class="cell medium-6">
                        <label>Género
                            {{ form.genero }}
                        </label>
                        {% if form.genero.errors %}
                            <p class="form-error is-visible">{{ form.genero.errors }}</p>
                        {% endif %}
                    </div>
                </div>
                <div class="grid-x grid-padding-x">
                    <div class="cell medium-6">
                        <label>Rol
                            {{ form.Rol }}
                        </label>
                        {% if form.Rol.errors %}
                            <p class="form-error is-visible">{{ form.Rol.errors }}</p>
                        {% endif %}
                    </div>
                </div>

                <div class="large-6 cell">
                    <label>Areas evaluar:
                        {{ form.Areas_evaluar }} 
                    </label>
                  </div>

                <div class="cell" style="display: flex; justify-content: center; gap: 10px;">
                    <button type="submit" class="button success">Actualizar</button>
                    <a href="{% url 'Usuarios:Listcrud' %}" class="button secondary">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    document.getElementById('add_area').onclick = function() {
        const available = document.getElementById('available_areas');
        const selected = document.getElementById('selected_areas');
        Array.from(available.selectedOptions).forEach(option => {
            selected.appendChild(option);
        });
    };
    document.getElementById('remove_area').onclick = function() {
        const selected = document.getElementById('selected_areas');
        const available = document.getElementById('available_areas');
        Array.from(selected.selectedOptions).forEach(option => {
            available.appendChild(option);
        });
    };
</script>

{% endblock content %}
